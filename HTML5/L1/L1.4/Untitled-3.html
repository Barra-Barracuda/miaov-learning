<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
</head>

<body>
<form>
	<input type="text" id="text" maxlength="5"/>
    <input type="submit" />
</form>

<script>
var oText = document.getElementById('text');
oText.value = "123456789";
oText.addEventListener('invalid',fn,false);
oText.oninput = function(){
	if(this.value == 'cao'){
		this.setCustomValidity('日'); //自定义警告信息
		}else{
			this.setCustomValidity(''); //要清空，不然警告信息一直在
			};
	};

function fn(){
	//alert(this.validity.tooLong); //只有opera 能兼容
	alert(this.validity.customError); //true 不符合自定义验证返回true
	ev.preventDefault();
	};
</script>
</body>
</html>
